<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE  mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="qna">
	<select id="qnaSelectList" parameterType="qnaVO" resultType="qnaVO">
		SELECT qna_seq,
		       content,
		       sort_order,
		       writer,
		       group_seq,
		       write_time,
		       modify_time,
		       del_flag
		FROM tb21_120_qna tb120
		WHERE tb120.del_flag = 'N' and tb120.group_seq = #{group_seq}
		order by tb120.sort_order
	</select>
	
	<insert id="qnaInsert" parameterType="qnaVO">
		insert into tb21_120_qna (
		   qna_seq
		  ,content
		  ,sort_order
		  ,writer
		  ,group_seq
		  ,write_time
		  ,del_flag
		) VALUES (
		   #{qna_seq}
		  ,#{content}
		  ,#{sort_order}
		  ,#{writer}
		  ,#{group_seq}
		  ,DATE_FORMAT(SYSDATE(), '%Y%m%d%H%i%s')
		  ,'N'
		)
	</insert>
	
	<select id="qnaMaxSeq" resultType="int">
		select IFNULL(max(a.qna_seq),0)+1 from tb21_120_qna a
	</select>
	
	<select id="qnaMaxGroupSeq" resultType="int">
		select IFNULL(max(a.group_seq),0) from tb21_120_qna a
	</select>
</mapper>