<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE  mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pct">
	<select id="percentageSelectList" resultType="lotto.spring.project.lottoPercentage.PercentageVO">
		SELECT tb100.history_key,
		       tb100.history_idx,
		       tb100.history_date,
		       b.ballList
		FROM tb21_100_lotto_history tb100
		     LEFT JOIN
		     (SELECT GROUP_CONCAT(ball_number SEPARATOR ',') AS ballList,
		             tb110.history_idx
		      FROM tb21_110_lotto_ball tb110
		      WHERE tb110.del_flag = 'N'
		      GROUP BY tb110.history_idx) b
		        ON b.history_idx = tb100.history_idx
		WHERE tb100.del_flag = 'N'
		ORDER BY tb100.history_idx DESC
		LIMIT 0, 10
	</select>
</mapper>